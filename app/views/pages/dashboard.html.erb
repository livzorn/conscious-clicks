<div class="dashboard-background">
  <div class="container-dashboard">

    <div class="dashboard-left">
      <div class="user_info">
        <img class="avatar-large" alt="avatar-large" src="https://avatars2.githubusercontent.com/u/70278044?s=460&u=b10537baca681bbc16927765e218f7cb671edcc1&v=4" />
        <h3 class="user-name"><%= current_user.name%></h3>
        <div class="dashboard-buttons">
          <%= link_to 'Home', root_path, class: 'btn-homepage' %>
          <%= link_to "Logout", destroy_user_session_path, method: :delete, class: 'btn-homepage' %>
        </div>
      </div>

    </div>

    <div class="dashboard-right">

      <div class="card-dashboard">
        <p class="text-center">Mood Calendar</p>
        <div class="grid-calendar">
          <p class="weekday"> <%= (Date.today - 6).strftime("%A")[0..2] %> </p>
          <p class="weekday"> <%= (Date.today - 5).strftime("%A")[0..2] %> </p>
          <p class="weekday"> <%= (Date.today - 4).strftime("%A")[0..2] %> </p>
          <p class="weekday"> <%= (Date.today - 3).strftime("%A")[0..2] %> </p>
          <p class="weekday"> <%= (Date.today - 2).strftime("%A")[0..2] %> </p>
          <p class="weekday"> <%= (Date.today - 1).strftime("%A")[0..2] %> </p>
          <p class="weekday"> <%= Date.today.strftime("%A")[0..2] %> </p>
          <p class="mood-day"> <%= @minus_six %> </p>
          <p class="mood-day"> <%= @minus_five %> </p>
          <p class="mood-day"> <%= @minus_four %> </p>
          <p class="mood-day"> <%= @minus_three %> </p>
          <p class="mood-day"> <%= @minus_two %> </p>
          <p class="mood-day"> <%= @minus_one %> </p>
          <p class="mood-day"> <%= @today %> </p>
        </div>
      </div>


      <div class="card-dashboard my-messages">
        <p class="text-center">My Message sets</p>
          <!-- Button trigger modal -->
          <button type="button" class="btn-create" data-toggle="modal" data-target="#exampleModalCenter">
            Create your own
          </button>

          <!-- Modal -->
          <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Create your own Message Set</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="newmessage_container p-1">
                    <%= simple_form_for [ @user, @message_set ] do |f| %>
                    <%= f.input :theme %>
                    <%= f.input :messages %>
                    <%= f.input :link %>
                    <%= f.input :public %>
                    <%= f.submit "add", class: "btn btn-primary" %>
                    <% end %>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary">Save changes</button>
                </div>
              </div>
            </div>
          </div>
          <div class="grid-message-sets">
            <% current_user.message_sets.each do |message_set| %>
              <p> <%= message_set.theme %> </p>
            <% end %>
          </div>
          <div class="mt-4">
            <%= link_to 'Update Messages', quiz_path, class: 'btn-create'  %>
          </div>
      </div>


      <div class="card-dashboard">

        <div class="justify-content-center">

          <div class="d-flex justify-content-center">
            <p class="text-center">Bookmarked sites</p>
            <div class="dropdown">
              <button onclick="myFunction()" class="dropbtn ml-2"><i class="fa fa-plus" aria-hidden="true"></i></button>
                <div id="myDropdown" class="dropdown-content">
                  <div class="newbookmark_container p-1">
                    <%= simple_form_for [ @user, @bookmark ] do |f| %>
                    <%= f.input :name %>
                    <%= f.input :link %>
                    <%= f.submit "add", class: "btn btn-primary" %>
                    <% end %>
                  </div>
                </div>
            </div>
          </div>

          <div class="bookmarks-all d-flex justify-content-center">
            <% current_user.bookmarks.each do |bookmark| %>

              <div class="bookmark-icon-container">
                <div class="bookmark-icon mr-4">
                  <%= link_to bookmark.link do%>
                    <%= image_tag bookmark.favicon_url, alt: "alttext", class: "favicon", width: "70px" %>
                    <!--  <%= bookmark.name %> -->
                  <% end %>
                </div>
                <div class="bookmark-trash">
                  <%=link_to bookmark_path(bookmark.id), method: :delete, data: { confirm: "Are you sure?" } do %>
                    <i class="far fa-times-circle"></i>
                  <% end %>
                </div>
              </div>

            <% end %>
          </div>

        </div>

      </div>

    </div>
  </div>
</div>

<script>
    function myFunction() {
      document.getElementById("myDropdown").classList.toggle("show");
    }
     document.querySelector('.dropbtn').onclick = myFunction
</script>
